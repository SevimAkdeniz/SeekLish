<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Profil</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    #kelimeChart {
      display: block;
      margin: 20px auto;
      max-width: 300px;
    }


  @media print {
    /* Navigasyon, buton ve diğer istenmeyenler gizlensin */
    #nav-bar, #logoutForm, button, select {
      display: none !important;
    }

    /* Yazdırma alanı genişlesin */
    body, #sectionn {
      width: 100%;
      margin: 0;
      padding: 0;
    }

    table {
      page-break-inside: avoid;
    }
  }


  </style>
  <link rel="stylesheet" href="/css/pages/game-pages/profil.css">
   <link rel="stylesheet" href="nav.css">

</head>


<body>

          <%- include('inc/nav') %>

  
     

  <!-- İçerik -->
  <div id="sectionn">
    <div>
<p>Kullanıcı <%= user.username %> <strong><%= puan %></strong> ⭐</p>
</p>
      <p style="font-weight: normal;">   Günlük kelime sayısını seçin</p>

      <form method="POST" action="/profil">
        <select name="adet">
          <% [1, 3, 5, 10].forEach(val => { %>
            <option value="<%= val %>" <%= val == quizCount ? "selected" : "" %>><%= val %> kelime</option>
          <% }) %>
        </select>
        <button type="submit">Kaydet</button>
      </form>

      <hr>

      <h3> Bilinen vs Bilinmeyen Kelime Grafiği</h3>
      <canvas id="kelimeChart" width="300" height="300"></canvas>

      <h3>📋 Bilinen Kelimeler</h3>
      <table border="1">
        <tr>
          <th>İngilizce</th>
          <th>Türkçe</th>
          <th>Adım</th>
          <th>Örnek Cümle(ler)</th>
        </tr>
        <% kelimeListesi.forEach(row => { %>
          <tr>
            <td><%= row.eng %></td>
            <td><%= row.tur %></td>
            <td><%= row.step %></td>
            <td><%= row.sample %></td>
          </tr>
        <% }) %>
      </table>
      <button onclick="window.print()" style="margin-bottom:20px;"id="printBtn">📄 Raporu Yazdır</button>


      <script>
        const chartData = <%- JSON.stringify(chartData) %>;

        const ctx = document.getElementById('kelimeChart').getContext('2d');
        new Chart(ctx, {
          type: 'doughnut',
          data: {
            labels: ['Bilinen', 'Bilinmeyen'],
            datasets: [{
              data: [chartData.knownCount, chartData.unknownCount],
              backgroundColor: ['#36a2eb', '#ff6384']
            }]
          },
          options: {
            cutout: '70%',
            responsive: true,
            plugins: {
              legend: {
                position: 'bottom'
              },
              title: {
                display: true,
                text: 'Bilinen vs Bilinmeyen Kelimeler'
              }
            }
          }
        });
      </script>
      
        <form method="POST" action="/logout" id="logoutForm">
    <button type="submit">🚪 Çıkış Yap</button>
  </form>

    </div>
  </div>



   


</body>

</html>
